<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Import Data</title>
    <meta name="author" content="A-PI CapstoneAD2020">
    <meta name="description" content="Our capstone for Microsoft Learn, Azure, Docs.">
    <meta name="keywords"
        content="Azure, Capstone, Informatics, Microsoft Learn, Microsoft, Students, Azure for Students">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="./assets/css/main.css" />
        <link rel="stylesheet" href="./style.css"> -->
    <link rel='stylesheet' href='../home.css'>
    <link rel='stylesheet' href='../catalog.css'>
    <link rel='stylesheet' href='../unit.css'>
    <script src="https://kit.fontawesome.com/2dd473fe6e.js" crossorigin="anonymous"></script>
</head>

<body class='bg-dark'>
    <div class="container-fluid">
        <nav class="navbar navbar-expand-lg pt-0">
            <a class="navbar-brand text-light" id="logo"><img src='../imgs/logo.png' width='30' height="30"
                    class='d-inline-block align-top mr-3' alt='Microsoft Encounter logo'>Encounter</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item mx-2">
                        <a class="nav-link text-light" href="../catalog.html">Catalog<span
                                class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item mx-2">
                        <a class="nav-link text-light" href="../bookmarks.html">Saved Courses<span
                                class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item mx-2">
                        <a class="nav-link text-light" href="../references.html">References</a>
                    </li>
                </ul>

                <form class='form-inline'>
                    <input class='form-control mr-sm-2' type='search' placeholder="Search" aria-label="Search"
                        id='nav-search'>
                    <button class="btn btn-outline-light my-2 my-sm-0 mr-4" type="submit" id='search-btn'><i
                            class="fas fa-search mx-1"></i></button>
                </form>

                <div class="dropdown text-light">
                    <span class="dropdown-toggle" type="button" id="profile-pic" data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false">
                        <img src="../imgs/microsoft_user.jpeg" id="profile-pic">
                    </span>
                    <ul class="dropdown-menu dropdown-menu-right bg-dark pb-3" aria-labelledby="profile-pic">
                        <li class="dropdown-item text-center text-light mb-3 disabled" id='profile-id'>
                            <img src="../imgs/microsoft_user.jpeg" id="profile-lg" class='mb-4'>
                            <div class="progress mb-2">
                                <div class="progress-bar progress-bar-striped" role="progressbar" style="width: 10%"
                                    aria-valuenow="12" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <p class="card-text mb-2">12% complete</p>
                        </li>
                        <li class="dropdown-item" id='settings'><a href='../settings.html'><small>View
                                    Profile</small></a></li>
                        <li class="dropdown-item text-light" id='log-out'><small>Log Out</small></li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
    <!--Content -->
    <!--Content taken from: https://docs.microsoft.com/en-us/learn/modules/build-a-faq-chat-bot-with-qna-maker-and-azure-bot-service/3-exercise-create-qna-knowledge-base-->
    <div class='container px-0 mt-5 pl-5'>
        <div class="row">
            <div class="col">
                <div class='text-light align-items-center justify-content-start'>
                    <a href='./clean.html' class='btn btn-outline-light mt-5 catalog pl-4 pr-4'>
                        <i class="fas fa-angle-left"></i> Previous
                    </a>
                </div>
            </div>
            <div class="col">
                <div class='text-light align-items-center justify-content-start'>
                    <a href='../catalog.html' class='btn btn-outline-light mt-5 catalog pl-3 pr-3'>
                        Course Sections <i class="fas fa-caret-down"></i>
                    </a>
                </div>
            </div>
            <div class="col">
                <div class='text-light align-items-center justify-content-start'>
                    <a href='./vis.html' class='btn btn-outline-light mt-5 catalog pl-4 pr-4'>
                        Next <i class="fas fa-angle-right"></i>
                    </a>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <div class="row text-light justify-content-between">
                    <div class='col'>
                        <h3 id='overview'>Predict flight delays by creating a machine learning model in Python</h3>
                        <div class="text-light">
                            <p>In this unit, you'll import Matplotlib into the notebook you've been working with and
                                configure the notebook to support inline Matplotlib output.
                            </p>
                            <ol>
                                <li>Switch back to the Azure notebook that you created in the previous section. If you
                                    closed the notebook, you can sign back into the Microsoft Azure Notebooks portal ,
                                    open your notebook, and use the Cell -> Run All to rerun the all of the cells in the
                                    notebook after opening it.
                                </li>
                                <li>Execute the following statements in a new cell at the end of the notebook. Ignore
                                    any warning messages that are displayed related to font caching:
                                </li>
                                <p>%matplotlib inline
                                    import matplotlib.pyplot as plt
                                    import seaborn as sns

                                    sns.set()</p>
                                <p>The first statement is one of several magic commands supported by the Python kernel
                                    that you selected when you created the notebook. It enables Jupyter to render
                                    Matplotlib output in a notebook without making repeated calls to show. And it must
                                    appear before any references to Matplotlib itself. The final statement configures
                                    Seaborn to enhance the output from Matplotlib.
                                </p>
                                <li>To see Matplotlib at work, execute the following code in a new cell to plot the ROC
                                    curve for the machine-learning model you built in the previous lab:
                                </li>
                                <p>from sklearn.metrics import roc_curve

                                    fpr, tpr, _ = roc_curve(test_y, probabilities[:, 1])
                                    plt.plot(fpr, tpr)
                                    plt.plot([0, 1], [0, 1], color='grey', lw=1, linestyle='--')
                                    plt.xlabel('False Positive Rate')
                                    plt.ylabel('True Positive Rate')
                                </p>
                                <li>Confirm that you see the following output:
                                </li>
                                <img
                                    src="https://docs.microsoft.com/en-us/learn/student-evangelism/predict-flight-delays-with-python/media/4-roc-curve.png">
                                <p>The dotted line in the middle of the graph represents a 50-50 chance of obtaining a
                                    correct answer. The blue curve represents the accuracy of your model. More
                                    importantly, the fact that this chart appears at all demonstrates that you can use
                                    Matplotlib in a Jupyter notebook.
                                </p>
                                <p>The reason you built a machine-learning model is to predict whether a flight will
                                    arrive on time or late. In this exercise, you'll write a Python function that calls
                                    the machine-learning model you built in the previous lab to compute the likelihood
                                    that a flight will be on time. Then you'll use the function to analyze several
                                    flights.
                                </p>
                            </ol>
                            <ol>
                                <li>Enter the following function definition in a new cell, and then run the cell.
                                </li>
                                <p>def predict_delay(departure_date_time, origin, destination):
                                    from datetime import datetime

                                    try:
                                    departure_date_time_parsed = datetime.strptime(departure_date_time, '%d/%m/%Y
                                    %H:%M:%S')
                                    except ValueError as e:
                                    return 'Error parsing date/time - {}'.format(e)

                                    month = departure_date_time_parsed.month
                                    day = departure_date_time_parsed.day
                                    day_of_week = departure_date_time_parsed.isoweekday()
                                    hour = departure_date_time_parsed.hour

                                    origin = origin.upper()
                                    destination = destination.upper()

                                    input = [{'MONTH': month,
                                    'DAY': day,
                                    'DAY_OF_WEEK': day_of_week,
                                    'CRS_DEP_TIME': hour,
                                    'ORIGIN_ATL': 1 if origin == 'ATL' else 0,
                                    'ORIGIN_DTW': 1 if origin == 'DTW' else 0,
                                    'ORIGIN_JFK': 1 if origin == 'JFK' else 0,
                                    'ORIGIN_MSP': 1 if origin == 'MSP' else 0,
                                    'ORIGIN_SEA': 1 if origin == 'SEA' else 0,
                                    'DEST_ATL': 1 if destination == 'ATL' else 0,
                                    'DEST_DTW': 1 if destination == 'DTW' else 0,
                                    'DEST_JFK': 1 if destination == 'JFK' else 0,
                                    'DEST_MSP': 1 if destination == 'MSP' else 0,
                                    'DEST_SEA': 1 if destination == 'SEA' else 0 }]

                                    return model.predict_proba(pd.DataFrame(input))[0][0]
                                </p>
                                <p>This function takes as input a date and time, an origin airport code, and a
                                    destination airport code, and returns a value between 0.0 and 1.0 indicating the
                                    probability that the flight will arrive at its destination on time. It uses the
                                    machine-learning model you built in the previous lab to compute the probability. And
                                    to call the model, it passes a DataFrame containing the input values to
                                    predict_proba. The structure of the DataFrame exactly matches the structure of the
                                    DataFrame we used earlier.
                                </p>
                                <li>Use the code below to compute the probability that a flight from New York to Atlanta
                                    on the evening of October 1 will arrive on time. The year you enter is irrelevant
                                    because it isn't used by the model.
                                </li>
                                <p>predict_delay('1/10/2018 21:45:00', 'JFK', 'ATL')
                                </p>
                                <p>Confirm that the output shows that the likelihood of an on-time arrival is 60%:
                                </p>
                                <img
                                    src="https://docs.microsoft.com/en-us/learn/student-evangelism/predict-flight-delays-with-python/media/4-jfk-to-atl.png">
                                <li>Modify the code to compute the probability that the same flight a day later will
                                    arrive on time:
                                </li>
                                <p>predict_delay('2/10/2018 21:45:00', 'JFK', 'ATL')
                                </p>
                                <p>How likely is this flight to arrive on time? If your travel plans were flexible,
                                    would you consider postponing your trip for one day?
                                </p>
                                <li>Now modify the code to compute the probability that a morning flight the same day
                                    from Atlanta to Seattle will arrive on time:
                                </li>
                                <p>predict_delay('2/10/2018 10:00:00', 'ATL', 'SEA')
                                </p>
                                <p>Is this flight likely to arrive on time?
                                </p>
                                <p>You now have an easy way to predict, with a single line of code, whether a flight is
                                    likely to be on time or late. Feel free to experiment with other dates, times,
                                    origins, and destinations. But keep in mind that the results are only meaningful for
                                    the airport codes ATL, DTW, JFK, MSP, and SEA because those are the only airport
                                    codes the model was trained with.
                                </p>
                            </ol>
                            <ol>
                                <li>Execute the following code to plot the probability of on-time arrivals for an
                                    evening flight from JFK to ATL over a range of days:
                                </li>
                                <p>import numpy as np

                                    labels = ('Oct 1', 'Oct 2', 'Oct 3', 'Oct 4', 'Oct 5', 'Oct 6', 'Oct 7')
                                    values = (predict_delay('1/10/2018 21:45:00', 'JFK', 'ATL'),
                                    predict_delay('2/10/2018 21:45:00', 'JFK', 'ATL'),
                                    predict_delay('3/10/2018 21:45:00', 'JFK', 'ATL'),
                                    predict_delay('4/10/2018 21:45:00', 'JFK', 'ATL'),
                                    predict_delay('5/10/2018 21:45:00', 'JFK', 'ATL'),
                                    predict_delay('6/10/2018 21:45:00', 'JFK', 'ATL'),
                                    predict_delay('7/10/2018 21:45:00', 'JFK', 'ATL'))
                                    alabels = np.arange(len(labels))

                                    plt.bar(alabels, values, align='center', alpha=0.5)
                                    plt.xticks(alabels, labels)
                                    plt.ylabel('Probability of On-Time Arrival')
                                    plt.ylim((0.0, 1.0))
                                </p>
                                <li>Confirm that the output looks like this:
                                </li>
                                <img
                                    src="https://docs.microsoft.com/en-us/learn/student-evangelism/predict-flight-delays-with-python/media/4-predict-plot-1.png">
                                <li>Modify the code to produce a similar chart for flights leaving JFK for MSP at 1:00
                                    p.m. on April 10 through April 16. How does the output compare to the output in the
                                    previous step?
                                </li>
                                <li>On your own, write code to graph the probability that flights leaving SEA for ATL at
                                    9:00 a.m., noon, 3:00 p.m., 6:00 p.m., and 9:00 p.m. on January 30 will arrive on
                                    time. Confirm that the output matches this:
                                </li>
                                <img
                                    src="https://docs.microsoft.com/en-us/learn/student-evangelism/predict-flight-delays-with-python/media/4-predict-plot-2.png">
                                <p>If you are new to Matplotlib and would like to learn more about it, you will find an
                                    excellent tutorial at https://www.labri.fr/perso/nrougier/teaching/matplotlib/.
                                    There is much more to Matplotlib than what was shown here, which is one reason why
                                    it is so popular in the Python community.</p>

                            </ol>
                        </div>
                        <div class='text-light align-items-center justify-content-start'>
                            <p>Next unit: Summary
                            </p>
                            <a href='./vis.html' class='btn btn-outline-light mt-5 catalog pl-4 pr-4'>
                                Next <i class="fas fa-angle-right"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class='col col-lg-3 pt-5'>
                <div id="navigation">
                    <nav class="nav flex-column p-3">
                        <a class="nav-link active bg-dark text-secondary" href="#overview">Overview</a>
                        <a class="nav-link text-light" href="#host">Hosting a knowledge base</a>
                        <a class="nav-link text-light" href="#create">Creating a knowledge base and QnA serv</a>
                        <a class="nav-link text-light" href="#provide">Provide the QnA Maker service details</a>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</body>


<footer class='text-center text-light text-bold pt-3 pb-5 mt-3 bg-secondary'>
    <div class='container mx-0'>
        <div class='row'>
            <p class='col font-weight-bold'>Catalog</p>
            <p class='col font-weight-bold'>References</p>
            <p class='col font-weight-bold'>Your Profile</p>
            <a href='https://forms.gle/udjCPzusf47xDcx39' class='text-light col font-weight-bold' id='contact-link'>
                <p>Contact Us</p>
            </a>
            <p class='col font-weight-bold'>More from Microsoft</p>
        </div>
    </div>
    <p class='text-center'>This project is part of the Informatics 2020 Capstone.</p>
    <!-- <div> -->

    <!-- </div> -->
</footer>
<script src='./home.js'></script>

<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>

</html>